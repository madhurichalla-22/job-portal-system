<!DOCTYPE html>
<html>
<head>
    <title>My Applications</title>
    <link rel="stylesheet" href="../style.css">
</head>

<body>

<div class="navbar">Job Portal - My Applications</div>

<h2>Applied Jobs</h2>

<div id="applicationsList"></div>


<script>

                  async function loadApplications() {

    const candidateId = localStorage.getItem("candidateId");

    if (!candidateId) {
        alert("Please login first");
        window.location.href = "candidate-login.html";
        return;
    }

    try {
        const res = await fetch(`http://localhost:8131/application/candidate/${candidateId}`);
        const applications = await res.json();

        let html = "";

        applications.forEach(app => {
            html += `
                <div class="job-card">
                    <h3>${app.job.title}</h3>
                    <p><b>Location:</b> ${app.job.location}</p>
                    <p><b>Salary:</b> ${app.job.salary}</p>
                    <p><b>Status:</b> ${app.status}</p>
                    <hr>
                </div>
            `;
        });

        document.getElementById("applicationsList").innerHTML = html;

    } catch (err) {
        alert("Error loading applications");
    }
}

loadApplications();
</script>
<script src="../api.js"></script>
<script src="../auth.js"></script>
<script src="../application.js"></script>

<script>
loadMyApplications();
</script>


</body>
</html>